---
phase: 02-monorepo-vertical-slice
plan: 06
type: execute
wave: 4
depends_on: ["02-04", "02-05"]
files_modified: []
autonomous: false
requirements: [INFRA-03, FE-01, FE-02, FE-05]

must_haves:
  truths:
    - "Developer runs pnpm dev from repo root and both services start"
    - "Visiting /app shows the hero input card"
    - "Submitting a URL or text generates a graph with correct entity colors and shapes"
    - "Clicking a node opens the detail panel and dims non-neighbors"
    - "Clicking a connected node in the panel navigates the graph selection"
    - "Cancel during loading aborts the request and resets to input state"
    - "Wrong URL toast appears: Couldn't read that URL — try pasting the text instead"
    - "CI workflows are present in .github/workflows/"
  artifacts:
    - path: ".github/workflows/ci.yml"
      provides: "CI pipeline"
    - path: ".github/workflows/deploy-preview.yml"
      provides: "Vercel preview deploy"
    - path: ".github/workflows/deploy-production.yml"
      provides: "Railway production deploy"
    - path: "apps/web/app/app/page.tsx"
      provides: "Working graph workspace"
  key_links:
    - from: "apps/web/app/app/page.tsx"
      to: "apps/api/app/generate/router.py"
      via: "POST /api/generate via Next.js rewrite"
      pattern: "generateGraph"
---

<objective>
Human verification of the complete Phase 2 vertical slice — confirms the full input-to-graph flow works end-to-end in the browser and CI workflows are in place.

Purpose: Phase 2's success criterion is "a developer can submit a URL or text in the browser, watch the graph generate, and interact with a styled Cytoscape canvas." This checkpoint proves it's true.
Output: Human confirmation that the vertical slice works.
</objective>

<execution_context>
@/Users/uzi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/uzi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/phases/02-monorepo-vertical-slice/02-04-SUMMARY.md
@.planning/phases/02-monorepo-vertical-slice/02-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Visual verification of the complete Phase 2 vertical slice</name>
  <action>Human verification — no automated implementation. Confirm the full input-to-graph flow works in the browser.</action>
  <verify>See how-to-verify section below for exact steps.</verify>
  <done>Human types "approved" after all 7 tests pass.</done>
  <what-built>
Complete Phase 2 vertical slice:
- Turborepo monorepo with Next.js 15 at apps/web and FastAPI at apps/api
- @graphvc/shared-types package with TypeScript types matching FastAPI schemas
- Hero-centered input card with URL/Text tab toggle
- Loading overlay with sequential step labels and Cancel button
- Cytoscape.js canvas with VC entity styling (indigo/emerald/amber/violet/pink by entity type)
- Node detail panel (right overlay on desktop, bottom sheet on mobile)
- FE-05 error toasts for scrape failure and empty graph
- GitHub Actions CI/CD workflows for Vercel preview and Railway production
  </what-built>
  <how-to-verify>
**Prerequisites:**
- `apps/api/.env` has `OPENAI_API_KEY`, `NEO4J_URI`, `NEO4J_USERNAME`, `NEO4J_PASSWORD`, `CLERK_JWKS_URL`, `CLERK_AUTHORIZED_PARTY` set
- Run from repo root: `pnpm dev`

**Test 1 — App loads:**
1. Visit http://localhost:3000 — should redirect to http://localhost:3000/app
2. Confirm the hero input card appears centered on a dark page with URL and Text tabs

**Test 2 — Graph generation from text:**
1. Click the "Text" tab
2. Paste this sample text (200+ chars):
   ```
   Paradigm led a $50M Series A in EigenLayer, a restaking protocol on Ethereum, with participation from a16z Crypto, Coinbase Ventures, and Polychain Capital. The round values EigenLayer at $500M. Protocol Labs founder Juan Benet joined as an advisor.
   ```
3. Click "Generate Graph"
4. Confirm: loading overlay appears with "Extracting entities..." and "Building graph..." cycling; Cancel button is visible
5. When graph appears: confirm input collapses to compact bar at top
6. Check node colors and shapes:
   - Paradigm (Investor) = indigo ellipse
   - EigenLayer (Project) = emerald rectangle
   - Series A (Round) = amber diamond
   - Person nodes (Juan Benet) = pink ellipse
7. Check edge labels are visible on all edges (not hover-only)

**Test 3 — Node interaction (FE-02):**
1. Click the Paradigm (Investor) node
2. Confirm: non-connected nodes and edges dim to ~20% opacity; detail panel opens on the right
3. Detail panel shows: node label, entity type label, properties table
4. Click a connected node in the panel → confirm graph selection updates to that node
5. Click the canvas background → confirm panel closes and dimming clears

**Test 4 — Fit button:**
1. Zoom way in on the graph
2. Click the "Fit" button (bottom-right of canvas)
3. Confirm graph recenters and fits to viewport

**Test 5 — Cancel loading:**
1. Click "New" in the collapsed bar to re-expand input
2. Submit the same text again
3. While loading, click "Cancel"
4. Confirm: loading overlay disappears, input re-expands, no error toast shown

**Test 6 — Error handling (FE-05):**
1. In URL tab, enter: `https://this-domain-does-not-exist-graphvc.com/`
2. Click Generate Graph
3. Confirm toast: "Couldn't read that URL — try pasting the text instead"

**Test 7 — CI files present:**
1. `ls .github/workflows/` — confirm ci.yml, deploy-preview.yml, deploy-production.yml all exist
  </how-to-verify>
  <resume-signal>Type "approved" if all 7 tests pass. Describe any failures (e.g., "Test 3 failed — panel not opening") to proceed with fixes.</resume-signal>
</task>

</tasks>

<verification>
All tests in the checkpoint task must pass before this plan is marked complete.
</verification>

<success_criteria>
- Human confirms all 7 verification tests pass
- Full vertical slice: input → loading → styled Cytoscape graph → detail panel works end-to-end
- Node colors match FE-01 specification exactly
- Error toasts match FE-05 exact strings
- CI workflow files present
</success_criteria>

<output>
After completion, create `.planning/phases/02-monorepo-vertical-slice/02-06-SUMMARY.md`
</output>
