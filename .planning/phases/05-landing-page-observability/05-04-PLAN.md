---
phase: 05-landing-page-observability
plan: "04"
type: execute
wave: 2
depends_on:
  - "05-03"
files_modified:
  - apps/web/components/landing/HowItWorks.tsx
  - apps/web/components/landing/PersonaCards.tsx
  - apps/web/components/landing/CtaBand.tsx
  - apps/web/components/landing/LandingFooter.tsx
  - apps/web/app/page.tsx
autonomous: false
requirements:
  - FE-04
  - OBS-01

must_haves:
  truths:
    - "Visiting / shows the landing page (not a redirect to /app)"
    - "The landing page has: hero section with demo graph, How it works 3-step explainer (Paste / Extract / Explore), use case cards for Analyst / Founder / Journalist, CTA band above footer, and a minimal footer"
    - "The landing page is visually premium-dark (slate/zinc 900+ base) with clean typography"
    - "A Sentry alert rule is configured in the Sentry dashboard to notify when error rate exceeds 1% over a 5-minute window"
  artifacts:
    - path: "apps/web/components/landing/HowItWorks.tsx"
      provides: "3-step numbered explainer: Paste → Extract → Explore"
      contains: "HowItWorks"
    - path: "apps/web/components/landing/PersonaCards.tsx"
      provides: "Analyst / Founder / Journalist use case cards"
      contains: "PersonaCards"
    - path: "apps/web/components/landing/CtaBand.tsx"
      provides: "Full-width CTA band: Ready to map the VC network? + Start free button"
      contains: "CtaBand"
    - path: "apps/web/components/landing/LandingFooter.tsx"
      provides: "Minimal footer: logo + copyright + Privacy Policy + Terms of Service links"
      contains: "LandingFooter"
    - path: "apps/web/app/page.tsx"
      provides: "Landing page assembling all landing components — replaces the redirect('/app') placeholder"
      contains: "LandingNav"
  key_links:
    - from: "apps/web/app/page.tsx"
      to: "all landing components"
      via: "import and render LandingNav, HeroSection, HowItWorks, PersonaCards, CtaBand, LandingFooter"
      pattern: "HeroSection"
    - from: "apps/web/app/page.tsx"
      to: "apps/web/components/landing/HeroSection.tsx"
      via: "direct import — no dynamic needed (HeroSection itself handles dynamic DemoGraph)"
      pattern: "HeroSection"
---

<objective>
Complete the landing page by building the remaining sections and assembling the full page. Ends with a human verification checkpoint that also covers Sentry alert rule configuration.

Purpose: Completes FE-04 requirement — the public acquisition surface is now fully functional. Replaces the Phase 2 placeholder redirect. Human verification confirms the page renders correctly end-to-end and the OBS-01 Sentry alert rule is configured.

Output: HowItWorks.tsx, PersonaCards.tsx, CtaBand.tsx, LandingFooter.tsx, and the assembled apps/web/app/page.tsx. Ends with a human verification checkpoint.
</objective>

<execution_context>
@/Users/uzi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/uzi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/05-landing-page-observability/05-CONTEXT.md
@.planning/phases/05-landing-page-observability/05-RESEARCH.md
@.planning/phases/05-landing-page-observability/05-03-SUMMARY.md
@apps/web/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Supporting landing sections (HowItWorks, PersonaCards, CtaBand, LandingFooter)</name>
  <files>
    apps/web/components/landing/HowItWorks.tsx
    apps/web/components/landing/PersonaCards.tsx
    apps/web/components/landing/CtaBand.tsx
    apps/web/components/landing/LandingFooter.tsx
  </files>
  <action>
**Create `apps/web/components/landing/HowItWorks.tsx`**:

3-step numbered explainer section. Locked copy from CONTEXT.md: step names are Paste, Extract, Explore. No icons required — large numerals as step indicators (Claude's discretion).

```typescript
const STEPS = [
  {
    number: '01',
    headline: 'Paste',
    description: 'Drop in any funding announcement, article, or URL. Supports raw text and public HTTPS sources.',
  },
  {
    number: '02',
    headline: 'Extract',
    description: 'AI identifies investors, projects, round details, narratives, and the relationships between them.',
  },
  {
    number: '03',
    headline: 'Explore',
    description: 'Interact with a live knowledge graph. Click nodes for details. Navigate connected entities.',
  },
]

export default function HowItWorks() {
  return (
    <section className="mx-auto max-w-7xl px-6 py-20">
      <h2 className="text-2xl font-bold text-white mb-12 text-center">How it works</h2>
      <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
        {STEPS.map(step => (
          <div key={step.number} className="space-y-4">
            <div className="text-5xl font-bold text-gray-800 font-mono">{step.number}</div>
            <h3 className="text-xl font-semibold text-white">{step.headline}</h3>
            <p className="text-gray-400 text-sm leading-relaxed">{step.description}</p>
          </div>
        ))}
      </div>
    </section>
  )
}
```

**Create `apps/web/components/landing/PersonaCards.tsx`**:

Analyst / Founder / Journalist use case cards. Locked copy from CONTEXT.md:
- Analyst: "Track which funds lead which rounds across 100+ deals"
- Founder: "See who's invested in your competitors before you pitch"
- Journalist: "Map the investor network behind any narrative in minutes"

```typescript
const PERSONAS = [
  {
    role: 'Analyst',
    tagline: 'Track which funds lead which rounds across 100+ deals',
    detail: 'Build deal sourcing pipelines. Spot emerging investors before they go mainstream. Export to your stack.',
  },
  {
    role: 'Founder',
    tagline: "See who's invested in your competitors before you pitch",
    detail: 'Understand fund thesis alignment. Identify warm intro paths. Map the ecosystem before your raise.',
  },
  {
    role: 'Journalist',
    tagline: 'Map the investor network behind any narrative in minutes',
    detail: "Trace the capital flow in any sector story. Visualize co-investment patterns. Export graphs for your readers.",
  },
]

export default function PersonaCards() {
  return (
    <section className="mx-auto max-w-7xl px-6 py-20 border-t border-gray-800">
      <h2 className="text-2xl font-bold text-white mb-12 text-center">Built for every lens on the market</h2>
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        {PERSONAS.map(p => (
          <div
            key={p.role}
            className="rounded-xl border border-gray-800 bg-gray-900/50 p-6 space-y-3 hover:border-gray-700 transition-colors"
          >
            <div className="text-xs font-semibold uppercase tracking-widest text-indigo-400">{p.role}</div>
            <p className="text-white font-medium leading-snug">{p.tagline}</p>
            <p className="text-gray-500 text-sm leading-relaxed">{p.detail}</p>
          </div>
        ))}
      </div>
    </section>
  )
}
```

**Create `apps/web/components/landing/CtaBand.tsx`**:

Full-width CTA band above footer. Locked copy from CONTEXT.md: "Ready to map the VC network?" + "Start free" / "Sign up" button. No pricing section.

```typescript
import Link from 'next/link'

export default function CtaBand() {
  return (
    <section className="border-t border-gray-800 bg-gray-900/30">
      <div className="mx-auto max-w-7xl px-6 py-16 text-center space-y-6">
        <h2 className="text-3xl font-bold text-white">Ready to map the VC network?</h2>
        <p className="text-gray-400 max-w-md mx-auto">
          Start free — no credit card required. Generate your first graph in under 30 seconds.
        </p>
        <Link
          href="/sign-in"
          className="inline-block px-8 py-3 rounded-lg bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition-colors"
        >
          Start free →
        </Link>
      </div>
    </section>
  )
}
```

**Create `apps/web/components/landing/LandingFooter.tsx`**:

Minimal footer per locked decision: logo + © year + Privacy Policy + Terms of Service links.

```typescript
import Link from 'next/link'

export default function LandingFooter() {
  const year = new Date().getFullYear()
  return (
    <footer className="border-t border-gray-800 bg-gray-950">
      <div className="mx-auto max-w-7xl px-6 py-8 flex flex-col sm:flex-row items-center justify-between gap-4">
        <span className="text-white font-bold text-sm">Instagraph</span>
        <div className="flex items-center gap-6 text-gray-500 text-xs">
          <span>© {year} Instagraph</span>
          <Link href="/privacy" className="hover:text-gray-300 transition-colors">Privacy Policy</Link>
          <Link href="/terms" className="hover:text-gray-300 transition-colors">Terms of Service</Link>
        </div>
      </div>
    </footer>
  )
}
```

**Visual constraints (locked):** Dark mode base — all sections use `bg-gray-950`, `bg-gray-900`, or `bg-gray-900/50`. No gradients, no glow effects. Typography-driven premium aesthetic matching Palantir/Hex reference.
  </action>
  <verify>
    <automated>cd "/Users/uzi/Documents/Git Projects/instagraph-vc" && pnpm --filter web exec tsc --noEmit 2>&1 | head -20</automated>
    <manual>Verify all four files exist in apps/web/components/landing/. Verify persona cards contain exact locked copy strings from CONTEXT.md (Analyst, Founder, Journalist taglines). Verify HowItWorks steps are Paste, Extract, Explore.</manual>
  </verify>
  <done>TypeScript compiles clean. HowItWorks.tsx has 3 steps with Paste/Extract/Explore headlines. PersonaCards.tsx has all three persona cards with exact locked copy. CtaBand.tsx has "Ready to map the VC network?" heading and "Start free →" link. LandingFooter.tsx has logo, copyright, Privacy Policy, and Terms of Service links.</done>
</task>

<task type="auto">
  <name>Task 2: Assemble full landing page at /</name>
  <files>
    apps/web/app/page.tsx
  </files>
  <action>
**Replace `apps/web/app/page.tsx`** entirely. The current file contains only `redirect('/app')` — this is the Phase 2 placeholder. Remove it completely and replace with the assembled landing page.

**CRITICAL PITFALL:** Do NOT keep the `redirect('/app')` call. Visiting `/` must show the landing page, not redirect. (Pitfall 7 in research.)

```typescript
import LandingNav from '@/components/landing/LandingNav'
import HeroSection from '@/components/landing/HeroSection'
import HowItWorks from '@/components/landing/HowItWorks'
import PersonaCards from '@/components/landing/PersonaCards'
import CtaBand from '@/components/landing/CtaBand'
import LandingFooter from '@/components/landing/LandingFooter'

export default function Home() {
  return (
    <div className="min-h-screen bg-gray-950 text-gray-100 flex flex-col">
      <LandingNav />
      <main className="flex-1">
        <HeroSection />
        <HowItWorks />
        <PersonaCards />
        <CtaBand />
      </main>
      <LandingFooter />
    </div>
  )
}
```

This is a Server Component by default (no 'use client' directive). LandingNav and HeroSection are 'use client' components — Next.js App Router handles client component imports from Server Components correctly.

After writing the file, run the dev server briefly to check for any import resolution errors:
```bash
cd /Users/uzi/Documents/Git Projects/instagraph-vc/apps/web && pnpm build 2>&1 | tail -20
```

If build errors appear, fix import paths before proceeding.
  </action>
  <verify>
    <automated>cd "/Users/uzi/Documents/Git Projects/instagraph-vc" && pnpm --filter web exec tsc --noEmit 2>&1 | head -30</automated>
    <manual>Verify apps/web/app/page.tsx does NOT contain redirect('/app'). Verify it imports and renders: LandingNav, HeroSection, HowItWorks, PersonaCards, CtaBand, LandingFooter.</manual>
  </verify>
  <done>TypeScript compiles clean. page.tsx imports all six landing components. No redirect() call present. Build output (pnpm build) shows no errors for the / route.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 5 landing page and observability stack:
- / — Full landing page: LandingNav, hero with demo Cytoscape graph, HowItWorks (3 steps), PersonaCards (3 personas), CtaBand, footer
- Security headers on every response (X-Frame-Options, X-Content-Type-Options, X-XSS-Protection, CSP)
- Sentry wired on Next.js frontend (instrumentation-client.ts) and FastAPI backend (main.py init)
- PostHog analytics wired: providers.tsx PostHogProvider in layout, captureGraphGenerated in app/app/page.tsx
  </what-built>
  <how-to-verify>
Start the dev server: `pnpm dev` from repo root.

**1. Landing page renders at /:**
- Visit http://localhost:3000/
- Confirm page shows (NOT a redirect to /app)
- Confirm sticky nav: "Instagraph" on left, "Sign In" on right
- Confirm hero: outcome-led headline, textarea input, demo Cytoscape graph on right (desktop)
- Scroll down: "How it works" section with 01/02/03 numbered steps (Paste / Extract / Explore)
- Scroll: Persona cards (Analyst / Founder / Journalist) with correct copy
- Scroll: "Ready to map the VC network?" CTA band with "Start free →" button
- Scroll to bottom: Footer with "Instagraph", © year, Privacy Policy, Terms of Service

**2. Demo graph animates:**
- Reload / page — confirm nodes fly into position (fcose animation, ~800ms)
- Confirm node colors match app: indigo ellipses, emerald rectangles, amber diamonds, violet hexagons, pink ellipses

**3. Security headers (dev may not show all headers — check one is present):**
- Open DevTools → Network tab → click any document request → check Response Headers
- Confirm X-Frame-Options: SAMEORIGIN is present
- Confirm X-Content-Type-Options: nosniff is present

**4. No broken imports or console errors:**
- Open browser DevTools → Console tab
- Confirm no red errors on page load at /
- Confirm no "window is not defined" SSR errors

**5. Anonymous trial input (optional smoke test):**
- If the FastAPI backend is running on port 8000, paste a short text in the landing hero input
- Click "Try it free →" — confirm loading state appears then either result or graceful error

**6. Sentry alert rule configuration (OBS-01 — manual step in Sentry dashboard):**
This step requires a Sentry account and the project created during 05-01 execution.
- Log in to https://sentry.io and navigate to your Instagraph project
- Go to Alerts → Create Alert → select "Error Rate" metric alert
- Configure: Condition = "Number of errors per minute is above 1% of total requests"; Time window = 5 minutes
- Set notification: Email or Slack channel of your choice
- Save the alert rule
- Confirm the rule appears in the Alerts list as active
- This satisfies OBS-01: "alert rule notifies when error rate exceeds 1% over a 5-minute window"
  </how-to-verify>
  <resume-signal>Type "approved" if the landing page renders correctly with all sections AND the Sentry alert rule is configured. Describe any visual or functional issues to fix.</resume-signal>
</task>

</tasks>

<verification>
Run from repo root after task 2 completes, before checkpoint:
1. `pnpm --filter web exec tsc --noEmit` — TypeScript clean
2. `pnpm --filter web build` — Next.js build succeeds with no errors on / route
3. Confirm apps/web/app/page.tsx has no redirect() call
4. Confirm all 6 landing component files exist in apps/web/components/landing/
</verification>

<success_criteria>
- FE-04 complete: Visiting / shows the landing page — hero with demo graph, HowItWorks 3-step explainer, Analyst/Founder/Journalist persona cards, CtaBand CTA, minimal footer
- Landing page is dark mode premium aesthetic (no gradients/glows, typography-driven)
- Demo graph animates in on load via fcose, uses identical entity styling to the app
- Persona cards and CTA copy matches locked decisions from CONTEXT.md exactly
- No redirect('/app') in page.tsx
- TypeScript clean, Next.js build succeeds
- OBS-01 alert rule: Sentry dashboard has an active error rate alert configured — triggers when error rate exceeds 1% over a 5-minute window
- Human approves at checkpoint (landing page + Sentry alert rule both verified)
</success_criteria>

<output>
After completion, create `.planning/phases/05-landing-page-observability/05-04-SUMMARY.md`
</output>
